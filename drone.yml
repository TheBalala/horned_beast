---
kind: pipeline
type: kubernetes
name: default

steps:
  # - name: Install dependanice 
  #   image: node:10.12.0-slim
  #   commands:
  #   - npm install
  #   - npm run build

  - name: build-and-push-docker-image
    image: plugins/docker
    settings:
      USERNAME:
        from_secret: USERNAME
      PASSWORD:
        from_secret: PASSWORD
      repo: alialhjouj/hello-world
      tags: ["$DRONE_BUILD_NUMBER"]
    
  # - name: build-docker-image
  #   image: docker:dind
  #   volumes:
  #     - name: dockersock
  #       path: /var/run
  #   settings:
  #     USERNAME:
  #       from_secret: USERNAME
  #     PASSWORD:
  #       from_secret: PASSWORD
  #   commands:
  #     - sleep 5
  #     - docker login -u alialhjouj -p Alicoder1996
  #     - docker build -t alialhjouj/$DRONE_REPO_NAME:$DRONE_BUILD_NUMBER .
  #     - docker push alialhjouj/$DRONE_REPO_NAME:$DRONE_BUILD_NUMBER

  - name: list-all-environment-variables
    image: alpine
    commands:
      - printenv









